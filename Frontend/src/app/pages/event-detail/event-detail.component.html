<div class="event-detail-container" *ngIf="!isLoading; else loading">
  <mat-card class="event-card">
    <mat-card-header>
      <mat-card-title>{{ event?.title }}</mat-card-title>
      <mat-card-subtitle>{{
        event?.date | date : "dd/MM/yyyy"
      }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <p>{{ event?.description || "Nessuna descrizione" }}</p>
    </mat-card-content>

    <mat-card-actions *ngIf="userRole === 'organizzatore'">
      <button mat-raised-button color="accent" (click)="openEditDialog()">
        Modifica evento
      </button>
      <button mat-raised-button color="warn" (click)="confirmDelete()">
        Elimina evento
      </button>
    </mat-card-actions>

    <mat-card-actions
      *ngIf="
        userRole === 'dipendente' &&
        !isRegistered &&
        !isCheckingRegistration &&
        showRegistrationButton
      "
    >
      <button
        mat-raised-button
        color="primary"
        (click)="openRegistrationDialog()"
      >
        Iscriviti all'evento
      </button>
    </mat-card-actions>

    <div
      *ngIf="
        userRole === 'dipendente' && isRegistered && !isCheckingRegistration
      "
      class="registered-message"
    >
      Sei gi√† iscritto all'evento
    </div>
  </mat-card>
</div>

<ng-template #loading>
  <div class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
  </div>
</ng-template>
