<div class="home-container">
  <mat-card class="content-card">
    <mat-card-header>
      <mat-card-title>
        <div class="header-container">
          <h1>Eventi Disponibili</h1>
          <p class="subtitle">Consulta l'elenco degli eventi attivi</p>
        </div>
        <button
          *ngIf="isOrganizer$ | async"
          mat-flat-button
          color="primary"
          (click)="openCreateEventDialog()"
        >
          <mat-icon>add</mat-icon> Crea Evento
        </button>
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Cerca evento</mat-label>
        <input
          matInput
          placeholder="Inserisci nome evento"
          [(ngModel)]="searchTerm"
          (input)="filterEvents()"
        />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

      <div class="zones-container">
        <mat-spinner
          *ngIf="isLoading"
          diameter="40"
          class="spinner"
        ></mat-spinner>

        <mat-card
          *ngFor="let event of filteredEvents"
          class="zone-card"
          (click)="openEventDetails(event)"
        >
          <div class="zone-header">
            <mat-icon class="zone-icon">event</mat-icon>
            <h3 class="zone-cap">{{ event.title }}</h3>
          </div>

          <div class="zone-details">
            <div class="detail-row">
              <span class="label">Descrizione:</span>
              <span class="value">{{
                event.description || "Nessuna descrizione"
              }}</span>
            </div>
            <div class="detail-row">
              <span class="label">Data:</span>
              <span class="value">{{ event.date | date : "dd/MM/yyyy" }}</span>
            </div>
          </div>

          <mat-icon class="arrow-icon">arrow_forward</mat-icon>
        </mat-card>

        <div
          *ngIf="!isLoading && filteredEvents.length === 0"
          class="no-results"
        >
          <mat-icon>search_off</mat-icon>
          <p>Nessun evento trovato</p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
